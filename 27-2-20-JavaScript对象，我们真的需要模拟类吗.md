# JavaScript对象，我们真的需要模拟类吗

在刚进入 JavaScript 世界并通过公司实习的时候就发现，在使用 JavaScript 编写代码的过程中随处可见的 function 配合 new 关键字来操作，这就是以前常见的 JavaScript “模拟面向对象”。  
  
在上一篇文章中已经知道 JavaScript 本身就是面向对象的，它并不需要模拟，只是它实现面向对象的方式和主流的流派不太一样，所以才让很多人产生误会。  
  
那么，随着理解的思路继续深入，这些“模拟面向对象”实际上做的事情就是“模拟基于类的面向对象”。  
  
尽管我认为“类”并非面向对象的全部，但是我们不应该责备社区出现这样的方案；但是 JavaScript 在“原型运行时”的基础上引入了 new、this等语言特性，使之看起来更像基于类的面向对象语言 Java，这种半吊子模拟，缺少了继承等关键特性，才导致大家视图对它进行修补，进而产生了种种解决方案。  
  
庆幸的是，从 ES6 开始， JavaScript 提供了 class 关键字来定义类，尽管，这样的方案仍然是基于原型运行时系统的模拟，但是它修正了之前的一些常见的“坑”，统一了社区方案。实际上，我认为“基于类”并非面向对象的唯一形态，如果我们把视线从“类”移开，Brenan 当年选择的原型系统，就是一个非常优秀的抽象对象的形式。

## 什么是原型？

什么是原型，原型就是顺应人类自然思维的产物，中文有个成语叫“照猫画虎”，这里的猫看起来就是老虎的原型；  
  
在上一节学习面向对象的时候知道，在不同的编程语言中，设计者也利用各种不同的语言特性来描述对象；最为成功的流派是使用“类”的方式来描述对象，诸如 c++、Java 等流行的基于类的编程语言。  
  
还有一种就是基于原型的编程语言，它们利用原型来描述对象，JavaScript 就是之中的代表。  
  
“基于类”的编程提倡使用一个关注分类和类之间关系开发模型；在这类语言中，总是先有类，再从类去实例化一个对象，类与类之间又可能会形成继承、组合等关系，类又往往与语言的类型系统整合，形成一定编译时的能力。  
与此相对，“基于原型”的编程看起来更为提倡程序员去关注一系列对象实例的行为，而后才去关心如何将这些对象，划分到最近的使用方式相似的原型对象，而不是将它们分成类。  
  
基于原型和基于类都能够满足基本的复用和抽象需求，但是使用的场景不太相同。  

在 JavaScript 之前，原型系统就更多与高动态性语言配合，并且多数基于原型的语言提倡运行时的原型修改，我想，这应该是 Brendan 选择原型系统很重要的理由。  
  
原型系统的“复制操作”有两种实现思路：

- 一个是并不真的去复制原型对象，而是使得新对象持有一个原型的引用
- 另一个是切实的复制对象，从此两个对象再无关联

历史上的基于原型语言因此产生了两个流派，显然，JavaScript 显然选择了前一种方式。  

## JavaScript 的原型

